<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Wayuu Kal√º ‚Äî Espa√±ol ‚Üî Wayuunaiki</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body{font-family:'Georgia','Palatino',serif;background:linear-gradient(160deg,#1B4F72 0%,#2C1810 50%,#120703 100%);color:white;min-height:100vh;position:relative;overflow-x:hidden}
  textarea::placeholder{color:rgba(139,107,85,0.5)}
  textarea{scrollbar-width:thin;scrollbar-color:rgba(196,98,58,0.3) transparent}
  input::placeholder{color:rgba(139,107,85,0.5)}
  .bg-pattern{position:fixed;inset:0;opacity:.05;pointer-events:none;background-image:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none'%3E%3Cpolygon fill='%23C4623A' points='40,0 80,40 40,80 0,40'/%3E%3Cpolygon fill='%23D4AF37' points='40,18 62,40 40,62 18,40'/%3E%3Cpolygon fill='%23C4623A' points='40,30 50,40 40,50 30,40'/%3E%3C/g%3E%3C/svg%3E");background-size:80px 80px}
  .bg-glow{position:fixed;top:-100px;right:-100px;width:400px;height:400px;border-radius:50%;background:radial-gradient(circle,rgba(196,98,58,0.12),transparent);pointer-events:none}
  .container{max-width:500px;margin:0 auto;padding:0 16px 52px;position:relative}
  .header{text-align:center;padding-top:32px;padding-bottom:16px}
  .logo{width:70px;height:70px;border-radius:20px;margin:0 auto 12px;background:linear-gradient(135deg,#C4623A,#D4AF37);display:flex;align-items:center;justify-content:center;box-shadow:0 8px 32px rgba(196,98,58,0.4);font-size:30px;transform:rotate(-6deg)}
  h1{font-size:26px;font-weight:900;letter-spacing:-1px;background:linear-gradient(135deg,#F5E6C8,#D4AF37);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
  .subtitle{font-size:11px;color:#8B6B55;margin:4px 0 8px;letter-spacing:2px;text-transform:uppercase}
  .badges{display:flex;justify-content:center;gap:5px;flex-wrap:wrap}
  .badge{background:rgba(212,175,55,0.13);border:1px solid rgba(212,175,55,0.25);border-radius:20px;padding:2px 9px;font-size:10px;font-weight:700;letter-spacing:.7px;text-transform:uppercase;white-space:nowrap}
  .tabs{display:flex;background:rgba(0,0,0,0.4);border-radius:16px;padding:3px;margin-bottom:16px;border:1px solid rgba(255,255,255,0.05)}
  .tab-btn{flex:1;padding:8px 2px;border:none;border-radius:13px;cursor:pointer;background:transparent;color:#8B6B55;font-size:10px;font-weight:700;transition:all .25s;font-family:inherit}
  .tab-btn.active{background:linear-gradient(135deg,#C4623A,#9E4A27);color:white;box-shadow:0 4px 12px rgba(196,98,58,0.3)}
  .tab-btn div:first-child{font-size:14px}
  .tab-btn div:last-child{margin-top:2px}
  .tab-content{display:none}
  .tab-content.active{display:block}
  .dir-box{display:flex;align-items:center;gap:10px;margin-bottom:12px;background:rgba(0,0,0,0.22);border-radius:16px;padding:12px 14px;border:1px solid rgba(255,255,255,0.06)}
  .dir-side{flex:1;text-align:center}
  .dir-label{font-size:9px;color:#8B6B55;letter-spacing:1px;margin-bottom:3px}
  .dir-lang{font-size:13px;font-weight:700}
  .swap-btn{width:42px;height:42px;border-radius:50%;border:none;flex-shrink:0;background:linear-gradient(135deg,#C4623A,#1B4F72);cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 16px rgba(0,0,0,0.3);transition:transform .3s}
  .swap-btn:hover{transform:rotate(180deg)}
  .input-box{background:rgba(255,255,255,0.05);border-radius:18px;border:1.5px solid rgba(255,255,255,0.09);margin-bottom:10px}
  .input-header{padding:10px 14px 5px;display:flex;justify-content:space-between;align-items:center}
  .input-label{font-size:9px;color:#8B6B55;text-transform:uppercase;letter-spacing:1px}
  .clear-btn{background:none;border:none;color:#8B6B55;cursor:pointer;font-size:12px}
  textarea{width:100%;background:transparent;border:none;outline:none;color:white;font-size:15px;padding:4px 14px 12px;resize:none;font-family:inherit;line-height:1.5}
  .input-footer{padding:0 10px 10px;display:flex;justify-content:space-between;align-items:center}
  .speak-btn{background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.18);border-radius:18px;padding:5px 12px;cursor:pointer;display:flex;align-items:center;gap:5px;color:rgba(255,255,255,0.65);font-size:11px;transition:all .2s;font-family:inherit}
  .speak-btn:disabled{opacity:.3;cursor:not-allowed}
  .speak-btn.speaking{background:rgba(212,175,55,0.2);border-color:rgba(212,175,55,0.5);color:#D4AF37}
  .translate-btn{background:linear-gradient(135deg,#C4623A,#9E4A27);border:none;border-radius:20px;padding:7px 18px;color:white;font-weight:700;cursor:pointer;font-size:13px;box-shadow:0 4px 12px rgba(196,98,58,0.3);font-family:inherit}
  .translate-btn:disabled{opacity:.5;cursor:not-allowed}
  .error-box{background:rgba(200,40,40,0.14);border:1px solid rgba(200,40,40,0.3);border-radius:12px;padding:9px 14px;margin-bottom:10px;font-size:12px;color:#ffaaaa}
  .result-box{border-radius:18px;border:1.5px solid rgba(255,255,255,0.05);min-height:120px;transition:all .3s;background:rgba(0,0,0,0.14)}
  .result-box.has-result{background:linear-gradient(135deg,rgba(27,79,114,0.2),rgba(58,124,165,0.1));border-color:rgba(58,124,165,0.28)}
  .result-header{padding:10px 14px 5px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:6px}
  .result-header-left{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
  .result-lang-label{font-size:9px;color:#3A7CA5;text-transform:uppercase;letter-spacing:1px}
  .result-body{padding:6px 14px 18px;min-height:70px}
  .result-text{font-size:19px;font-weight:700;color:#F5E6C8;line-height:1.4;margin-bottom:6px}
  .result-nota{font-size:11px;color:#8B6B55;font-style:italic;margin-bottom:4px}
  .result-entry{font-size:10px;color:#8B6B55;margin-top:4px}
  .result-ia-note{font-size:10px;color:#8B6B55;font-style:italic;margin-top:4px}
  .result-placeholder{color:#8B6B55;font-size:13px;padding-top:10px}
  .wave{display:flex;align-items:center;gap:3px;height:28px}
  .wave-bar{width:4px;border-radius:2px;background:#3A7CA5;height:4px}
  @keyframes wv{0%{height:4px}100%{height:26px}}
  .wave-bar.on{animation:wv .7s ease-in-out infinite alternate}
  .mic-section{margin-top:20px;display:flex;flex-direction:column;align-items:center;gap:8px}
  .mic-divider{height:1px;width:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.07),transparent)}
  .mic-hint{font-size:11px;color:#8B6B55}
  .mic-btn{width:74px;height:74px;border-radius:50%;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s}
  .mic-btn.idle{background:radial-gradient(circle,#3A7CA5,#1B4F72);box-shadow:0 8px 24px rgba(58,124,165,0.3)}
  .mic-btn.listening{background:radial-gradient(circle,#C4623A,#9E4A27);box-shadow:0 0 0 8px rgba(196,98,58,0.2),0 0 0 16px rgba(196,98,58,0.07),0 8px 24px rgba(196,98,58,0.35);transform:scale(1.08)}
  /* Dict tab */
  .dict-search{width:100%;background:rgba(255,255,255,0.07);border:1.5px solid rgba(255,255,255,0.12);border-radius:14px;padding:12px 16px;color:white;font-size:14px;outline:none;font-family:inherit}
  .dict-results{margin-top:8px;display:flex;flex-direction:column;gap:6px}
  .dict-item{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.09);border-radius:12px;padding:10px 14px;cursor:pointer;transition:all .2s}
  .dict-item:hover{background:rgba(196,98,58,0.15)}
  .dict-item-header{display:flex;justify-content:space-between;margin-bottom:4px}
  .dict-item-key{font-weight:700;color:#E8956D;font-family:monospace;font-size:14px}
  .dict-item-val{font-size:12px;color:rgba(255,255,255,0.65);line-height:1.4}
  /* Phrases */
  .phrase-cats{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:14px}
  .cat-btn{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);border-radius:20px;padding:4px 12px;cursor:pointer;color:#8B6B55;font-size:10px;font-weight:600;transition:all .2s;font-family:inherit}
  .cat-btn.active{background:#C4623A;border-color:#C4623A;color:white}
  .phrase-list{display:flex;flex-direction:column;gap:9px}
  .phrase-item{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.07);border-radius:14px;padding:12px 14px;cursor:pointer;transition:all .2s}
  .phrase-item:hover{background:rgba(196,98,58,0.12);border-color:rgba(196,98,58,0.25)}
  .phrase-row{display:flex;justify-content:space-between;margin-bottom:5px}
  .phrase-es{font-size:14px;font-weight:700;color:white;margin-bottom:3px}
  .phrase-way{font-size:15px;color:#E8956D;font-style:italic;font-weight:600}
  .phrase-nota{font-size:10px;color:#8B6B55;border-top:1px solid rgba(255,255,255,0.05);padding-top:6px;margin-top:6px}
  /* Grammar */
  .grammar-source{margin-bottom:20px;padding:14px 16px;border-radius:14px;background:rgba(212,175,55,0.08);border:1px solid rgba(212,175,55,0.2);font-size:12px;color:#D4AF37;line-height:1.7}
  .grammar-h{color:#F5E6C8;font-size:14px;margin:0 0 10px;letter-spacing:1px;text-transform:uppercase}
  .alpha-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-bottom:20px}
  .alpha-item{background:rgba(255,255,255,0.04);border-radius:10px;padding:8px 12px;border:1px solid rgba(255,255,255,0.06);display:flex;align-items:center;gap:10px}
  .alpha-letter{font-weight:900;font-size:18px;color:#D4AF37;font-family:monospace;min-width:22px}
  .alpha-desc{font-size:11px;color:rgba(255,255,255,0.65)}
  .pron-item{display:flex;justify-content:space-between;align-items:center;background:rgba(255,255,255,0.04);border-radius:10px;padding:9px 12px;border:1px solid rgba(255,255,255,0.06);margin-bottom:5px}
  .pron-word{font-weight:700;color:#E8956D;font-family:monospace;font-size:13px}
  .pron-es{color:rgba(255,255,255,0.7);font-size:12px}
  .suf-item{display:flex;gap:12px;align-items:flex-start;background:rgba(255,255,255,0.04);border-radius:10px;padding:9px 12px;border:1px solid rgba(255,255,255,0.06);margin-bottom:5px}
  .suf-key{font-weight:900;color:#D4AF37;font-family:monospace;min-width:55px;font-size:13px}
  .suf-desc{font-size:12px;color:rgba(255,255,255,0.65)}
  .grammar-tip{margin-top:16px;padding:14px 16px;border-radius:14px;background:rgba(58,124,165,0.1);border:1px solid rgba(58,124,165,0.2);font-size:12px;color:#3A7CA5;line-height:1.8}
  /* History */
  .history-empty{text-align:center;padding-top:48px;color:#8B6B55}
  .history-emoji{font-size:48px;margin-bottom:12px}
  .history-header{display:flex;justify-content:space-between;margin-bottom:12px;align-items:center}
  .history-count{color:#8B6B55;font-size:12px}
  .history-clear{background:none;border:1px solid rgba(255,255,255,0.12);border-radius:10px;color:#8B6B55;cursor:pointer;padding:4px 12px;font-size:11px;font-family:inherit}
  .history-list{display:flex;flex-direction:column;gap:7px}
  .history-item{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.07);border-radius:12px;padding:11px 13px;cursor:pointer;transition:all .2s}
  .history-item:hover{background:rgba(255,255,255,0.09)}
  .history-item-header{display:flex;justify-content:space-between;margin-bottom:3px}
  .history-dir{font-size:9px;color:#8B6B55;text-transform:uppercase;letter-spacing:1px}
  .history-input{font-size:13px;font-weight:600;color:white;margin-bottom:2px}
  .history-output{font-size:12px;color:#E8956D;font-style:italic}
  /* Footer */
  .footer{margin-top:32px;text-align:center}
  .footer-line{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.06),transparent);margin-bottom:14px}
  .footer-text{font-size:10px;color:rgba(139,107,85,0.4);line-height:1.8}
  /* Loading wave */
  .loading-row{display:flex;align-items:center;gap:10px;padding-top:12px}
  .loading-text{color:#8B6B55;font-size:13px}
  /* Muted info */
  .dict-count{color:#8B6B55;font-size:12px;text-align:center;margin:0 0 14px}
  .dict-not-found{color:#8B6B55;font-size:13px;margin-top:8px;text-align:center}
  /* API key modal */
  .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:100;display:flex;align-items:center;justify-content:center;padding:20px}
  .modal-box{background:linear-gradient(135deg,#2C1810,#1B4F72);border:1px solid rgba(255,255,255,0.12);border-radius:20px;padding:24px;max-width:420px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,0.5)}
  .modal-title{font-size:17px;font-weight:800;color:#F5E6C8;margin-bottom:6px}
  .modal-sub{font-size:12px;color:#8B6B55;margin-bottom:16px;line-height:1.6}
  .modal-input{width:100%;background:rgba(255,255,255,0.08);border:1.5px solid rgba(255,255,255,0.15);border-radius:12px;padding:11px 14px;color:white;font-size:13px;outline:none;font-family:monospace;margin-bottom:10px}
  .modal-input:focus{border-color:rgba(212,175,55,0.5)}
  .modal-btns{display:flex;gap:8px;justify-content:flex-end}
  .modal-cancel{background:none;border:1px solid rgba(255,255,255,0.15);border-radius:12px;color:#8B6B55;padding:8px 16px;cursor:pointer;font-size:12px;font-family:inherit}
  .modal-ok{background:linear-gradient(135deg,#C4623A,#9E4A27);border:none;border-radius:12px;color:white;padding:8px 18px;cursor:pointer;font-size:12px;font-weight:700;font-family:inherit}
  .modal-link{font-size:11px;color:#3A7CA5;margin-bottom:14px;display:block}
  .apikey-bar{display:flex;align-items:center;gap:8px;margin-bottom:12px;background:rgba(0,0,0,0.22);border-radius:12px;padding:8px 12px;border:1px solid rgba(255,255,255,0.06);cursor:pointer}
  .apikey-bar:hover{border-color:rgba(212,175,55,0.3)}
  .apikey-dot{width:8px;height:8px;border-radius:50%;background:#4A7C59;flex-shrink:0}
  .apikey-dot.off{background:#8B6B55}
  .apikey-text{font-size:11px;color:#8B6B55;flex:1}
  .apikey-edit{font-size:10px;color:#D4AF37;text-decoration:underline}
</style>
</head>
<body>
<div class="bg-pattern"></div>
<div class="bg-glow"></div>

<div class="container">
  <!-- HEADER -->
  <div class="header">
    <div class="logo">üåµ</div>
    <h1>Wayuu Kal√º</h1>
    <p class="subtitle">Espa√±ol ‚Üî Wayuunaiki</p>
    <div class="badges" id="header-badges"></div>
  </div>

  <!-- TABS -->
  <div class="tabs" id="tabs-bar"></div>

  <!-- TAB: TRADUCIR -->
  <div class="tab-content active" id="tab-translate">
    <!-- Direcci√≥n -->
    <!-- API Key bar -->
    <div class="apikey-bar" id="apikey-bar">
      <div class="apikey-dot off" id="apikey-dot"></div>
      <span class="apikey-text" id="apikey-text">Sin API key ‚Äî solo diccionario nativo disponible</span>
      <span class="apikey-edit">Configurar</span>
    </div>
    <div class="dir-box">
      <div class="dir-side">
        <div class="dir-label">DESDE</div>
        <div class="dir-lang" id="dir-from"></div>
      </div>
      <button class="swap-btn" id="swap-btn" title="Intercambiar idiomas">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round">
          <path d="M7 16V4m0 0L3 8m4-4l4 4M17 8v12m0 0l4-4m-4 4l-4-4"/>
        </svg>
      </button>
      <div class="dir-side">
        <div class="dir-label">HACIA</div>
        <div class="dir-lang" id="dir-to"></div>
      </div>
    </div>

    <!-- Input -->
    <div class="input-box">
      <div class="input-header">
        <span class="input-label" id="input-label"></span>
        <button class="clear-btn" id="clear-btn" style="display:none">‚úï</button>
      </div>
      <textarea id="input-text" rows="3" placeholder="Escribe en espa√±ol o usa el micr√≥fono..."></textarea>
      <div class="input-footer">
        <button class="speak-btn" id="speak-input-btn" disabled>
          <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
          Escuchar
        </button>
        <button class="translate-btn" id="translate-btn" disabled>Traducir ‚Üí</button>
      </div>
    </div>

    <!-- Error -->
    <div class="error-box" id="error-box" style="display:none"></div>

    <!-- Resultado -->
    <div class="result-box" id="result-box">
      <div class="result-header">
        <div class="result-header-left">
          <span class="result-lang-label" id="result-lang-label"></span>
          <span id="result-source-badge" style="display:none"></span>
          <span id="result-cat-badge" style="display:none"></span>
        </div>
        <button class="speak-btn" id="speak-result-btn" style="display:none">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
          Escuchar
        </button>
      </div>
      <div class="result-body" id="result-body">
        <p class="result-placeholder">La traducci√≥n aparecer√° aqu√≠...</p>
      </div>
    </div>

    <!-- Micr√≥fono -->
    <div class="mic-section">
      <div class="mic-divider"></div>
      <p class="mic-hint" id="mic-hint">Pulsa el micr√≥fono y habla en espa√±ol</p>
      <div class="wave" id="mic-wave" style="display:none">
        <div class="wave-bar on" style="animation-delay:0s;background:#C4623A"></div>
        <div class="wave-bar on" style="animation-delay:.12s;background:#C4623A"></div>
        <div class="wave-bar on" style="animation-delay:.24s;background:#C4623A"></div>
        <div class="wave-bar on" style="animation-delay:.36s;background:#C4623A"></div>
        <div class="wave-bar on" style="animation-delay:.48s;background:#C4623A"></div>
      </div>
      <button class="mic-btn idle" id="mic-btn">
        <svg width="26" height="26" viewBox="0 0 24 24" fill="white" id="mic-icon">
          <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
          <path d="M19 10v2a7 7 0 0 1-14 0v-2" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
          <line x1="12" y1="19" x2="12" y2="23" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
          <line x1="8" y1="23" x2="16" y2="23" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- TAB: DICCIONARIO -->
  <div class="tab-content" id="tab-dict">
    <p class="dict-count" id="dict-count"></p>
    <input class="dict-search" id="dict-search" type="text" placeholder="Buscar en el diccionario nativo..."/>
    <div class="dict-results" id="dict-results"></div>
  </div>

  <!-- TAB: FRASES -->
  <div class="tab-content" id="tab-phrases">
    <p class="dict-count" id="phrases-count"></p>
    <div class="phrase-cats" id="phrase-cats"></div>
    <div class="phrase-list" id="phrase-list"></div>
  </div>

  <!-- TAB: GRAM√ÅTICA -->
  <div class="tab-content" id="tab-grammar">
    <div class="grammar-source">
      <strong>Fuentes:</strong> Captain &amp; Captain (SIL, 2005) ¬∑ Jusay√∫ &amp; Olza (1988) ¬∑ Mansen &amp; Mansen (1984)
    </div>
    <h3 class="grammar-h">Alfabeto Oficial (20 letras)</h3>
    <div class="alpha-grid" id="alpha-grid"></div>
    <h3 class="grammar-h">Pronombres y Prefijos</h3>
    <div id="pron-list"></div>
    <h3 class="grammar-h" style="margin-top:16px">Sufijos Determinativos</h3>
    <div id="suf-list"></div>
    <div class="grammar-tip">
      <strong>‚ö° Reglas r√°pidas:</strong><br/>
      ‚Ä¢ Verbos infinitivos terminan en <strong>-aa</strong> (ekaa = comer)<br/>
      ‚Ä¢ No existe g√©nero gramatical masc./fem. en los nombres<br/>
      ‚Ä¢ Vocales dobles (aa, ee, ii) = pronunciaci√≥n m√°s larga<br/>
      ‚Ä¢ El acento normalmente recae en la segunda s√≠laba<br/>
      ‚Ä¢ El ' antes de vocal = cierre glotal breve (ej: ka<strong>'</strong>i = sol/d√≠a)<br/>
      ‚Ä¢ Hay 3 tipos de verbos: transitivos, intransitivos, de estado
    </div>
  </div>

  <!-- TAB: HISTORIAL -->
  <div class="tab-content" id="tab-history">
    <div id="history-content"></div>
  </div>

  <!-- FOOTER -->
  <div class="footer">
    <div class="footer-line"></div>
    <p class="footer-text">
      üìñ David M. &amp; Linda B. Captain ¬∑ SIL International, 2005<br/>
      üìö Miguel √Ångel Jusay√∫ &amp; Jes√∫s Olza Zubiri, 1988<br/>
      üåµ Pueblo Wayuu ¬∑ La Guajira, Colombia &amp; Venezuela
    </p>
  </div>
</div>

<!-- API KEY MODAL -->
<div class="modal-overlay" id="apikey-modal" style="display:none">
  <div class="modal-box">
    <div class="modal-title">üîë API Key de Anthropic</div>
    <p class="modal-sub">Para usar la traducci√≥n con IA (cuando una palabra no est√° en el diccionario nativo), necesitas tu API key de Anthropic. Se guarda solo en tu navegador.</p>
    <a class="modal-link" href="https://console.anthropic.com/settings/keys" target="_blank">‚Üí Obtener API key en console.anthropic.com</a>
    <input class="modal-input" id="apikey-input" type="password" placeholder="sk-ant-api03-..."/>
    <div class="modal-btns">
      <button class="modal-cancel" id="apikey-cancel">Cancelar</button>
      <button class="modal-ok" id="apikey-ok">Guardar</button>
    </div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  DICCIONARIO NATIVO COMPLETO ‚Äî WAYUUNAIKI ‚Üî ESPA√ëOL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const DB = {
  "aa": ["adv. s√≠", "basic"],
  "nno": ["adv. no (negaci√≥n)", "basic"],
  "anaa": ["v.e. ser bueno/na; estar bien; sanar ‚Äî n. salud", "basic"],
  "anashii": ["adj./adv. bien, bueno (expresi√≥n de gratitud/bienestar)", "basic"],
  "atak": ["interj. ¬°caramba!", "basic"],
  "jamaya": ["saludo ‚Äî Buenos d√≠as / Buenas (saludo general wayuu)", "saludo"],
  "jam√ºs√º t√º": ["¬øc√≥mo est√°? ¬øc√≥mo est√°s? (estado de una persona)", "saludo"],
  "akotchiiakat": ["por favor (al hacer peticiones)", "basic"],
  "an√ºlia": ["n.pos. nombre", "basic"],
  "s√ºan√ºlia": ["su nombre / c√≥mo se llama", "basic"],
  "taya": ["pron. yo (primera persona singular)", "pronombre"],
  "pia": ["pron. t√∫ (segunda persona singular)", "pronombre"],
  "nia": ["pron. √©l (tercera persona masc. singular)", "pronombre"],
  "shia": ["pron. ella (tercera persona no masc. singular)", "pronombre"],
  "waya": ["pron. nosotros/as", "pronombre"],
  "jia": ["pron. ustedes (segunda persona plural)", "pronombre"],
  "naya": ["pron. ellos/as (tercera persona plural)", "pronombre"],
  "ekii": ["n.pos. 1. cabeza. 2. mente. 3. toc√≥n. 4. fuente. 5. origen. abs. ekiy√º√º", "cuerpo"],
  "aa'in": ["n.pos. coraz√≥n, alma, esp√≠ritu, mente, voluntad", "cuerpo"],
  "aan√ºk√º": ["n.pos. boca", "cuerpo"],
  "ache'e": ["n.pos. oreja, o√≠do", "cuerpo"],
  "ai": ["n.pos. diente. V. aliina", "cuerpo"],
  "aliina": ["n.pos. muela", "cuerpo"],
  "ajap√º": ["n.pos. mano", "cuerpo"],
  "ekia": ["n.pos. 1. mano derecha. 2. utensilio para comer", "cuerpo"],
  "epe'e": ["n.pos. mano izquierda", "cuerpo"],
  "ejepira": ["n.pos. dedo (de la mano). V. apachera", "cuerpo"],
  "apachera": ["n.pos. dedo (del pie)", "cuerpo"],
  "apato'u": ["n.pos. u√±a, garra, pezu√±a", "cuerpo"],
  "ajapkii": ["n.pos. mu√±eca", "cuerpo"],
  "ajap√ºna": ["n.pos. pulsera (tambi√©n en cuerpo)", "cuerpo"],
  "at√ºna": ["n.pos. 1. brazo, ala. 2. rama. 3. pluma", "cuerpo"],
  "aluuwain": ["n.pos. pecho", "cuerpo"],
  "achira": ["n.pos. 1. seno. 2. leche", "cuerpo"],
  "asa'a": ["n.pos. 1. pierna, pata. 2. horc√≥n (de la casa)", "cuerpo"],
  "aaluwain": ["n.pos. tobillo", "cuerpo"],
  "asapain": ["n.pos. rodilla", "cuerpo"],
  "ap√º'√º": ["n.pos. muslo", "cuerpo"],
  "asatala": ["n.pos. codo", "cuerpo"],
  "asap√º": ["n.pos. espalda, columna vertebral", "cuerpo"],
  "ase'eru'u": ["n.pos. mitad, cintura", "cuerpo"],
  "ase'ewain": ["n.pos. cadera", "cuerpo"],
  "ale'e": ["n.pos. est√≥mago, vientre, abdomen, barriga", "cuerpo"],
  "anulu": ["n.pos. nuca, cuello", "cuerpo"],
  "am√ºla": ["n.pos. garganta", "cuerpo"],
  "eimata": ["n.pos. labio", "cuerpo"],
  "e'ichi": ["n.pos. 1. nariz. 2. hocico. 3. pico. 4. punta", "cuerpo"],
  "e'iima": ["n.pos. barba", "cuerpo"],
  "e'iyeise": ["n.pos. barbilla, ment√≥n", "cuerpo"],
  "awalapa'a": ["n.pos. mejilla", "cuerpo"],
  "awalainse": ["n.pos. mand√≠bula, quijada", "cuerpo"],
  "aralo'u": ["n.pos. coronilla ‚Äî posp. encima de, sobre la cabeza de", "cuerpo"],
  "ekiisholoin": ["n.pos. cerebro, seso", "cuerpo"],
  "ekiip√º'√º": ["n.pos. cabeza (de un grupo), gu√≠a, jefe", "cuerpo"],
  "einase": ["n.pos. asiento / nalgas", "cuerpo"],
  "e'ipo'u": ["n.pos. frente", "cuerpo"],
  "as√ºla": ["n.pos. 1. arteria, vena. 2. tend√≥n", "cuerpo"],
  "asha": ["n.pos. sangre. V. isha", "cuerpo"],
  "isha": ["n. sangre. V. asha", "cuerpo"],
  "ach√º'√º": ["n.pos. ri√±√≥n", "cuerpo"],
  "apana": ["n.pos. h√≠gado", "cuerpo"],
  "ay√ºlain": ["n.pos. intestino, tripa", "cuerpo"],
  "ata": ["n.pos. 1. piel, cuero. 2. c√°scara, corteza. 3. cubierta, envoltura, vaina", "cuerpo"],
  "a'wala": ["n.pos. cabello. V. walashi", "cuerpo"],
  "am√ºlira": ["n.pos. 1. vello. 2. pluma", "cuerpo"],
  "ewein": ["n.pos. lunar", "cuerpo"],
  "asira": ["n.pos. risa", "cuerpo"],
  "a'wiira": ["n.pos. 1. l√°grima. 2. manantial", "cuerpo"],
  "awaa": ["n.pos. saliva", "cuerpo"],
  "era": ["n.pos. 1. jugo, savia. 2. caldo. 3. sudor", "cuerpo"],
  "a√ºliijana": ["n.pos. collar", "cuerpo"],
  "ashe'in": ["n.pos. ropa. abs. she'in", "cuerpo"],
  "aicha": ["n.pos. ropa interior", "cuerpo"],
  "achep√º": ["n.pos. pintura para la cara", "cuerpo"],
  "awatse": ["n.pos. costilla", "cuerpo"],
  "atu'u": ["n.pos. superficie interior/inferior, parte superior de las piernas", "cuerpo"],
  "asipala": ["n.pos. 1. cicatriz. 2. viga lateral", "cuerpo"],
  "alio'u": ["n.pos. herida", "cuerpo"],
  "eema": ["n.pos. miedo a (algo)", "cuerpo"],
  "ayee": ["n.pos. lengua", "cuerpo"],
  "ashuku": ["n.pos. huevo", "cuerpo"],
  "asi": ["n.pos. cola", "cuerpo"],
  "asii": ["n. flor", "naturaleza"],
  "awala": ["n.pos. hermano/a. pl. awalayuu", "familia"],
  "ashunuu": ["n.pos. hermana menor (de var√≥n)", "familia"],
  "epaya": ["n.pos. hermano/a mayor", "familia"],
  "em√ºlia": ["n.pos. hermano menor. abs. em√ºliee", "familia"],
  "emiirua": ["n.pos. hermana menor (de mujer)", "familia"],
  "achon": ["n.pos. 1. hijo/a. 2. cr√≠a. 3. fruto, fruta. pl. achonnii", "familia"],
  "ei": ["n.pos. 1. madre. 2. t√≠a (paterna). abs. ey√º√º", "familia"],
  "ashi": ["n.pos. 1. padre. 2. t√≠o (paterno). abs. ash√º√º", "familia"],
  "aa'ir√º": ["n.pos. t√≠a materna", "familia"],
  "ala√ºla": ["n.pos. t√≠o materno", "familia"],
  "atuushi": ["n.pos. 1. abuelo. 2. antepasado. pl. atuushinuu", "familia"],
  "aikeyuu": ["n.pos. nieto/a; descendiente", "familia"],
  "al√ºin": ["n.pos. nieto/ta", "familia"],
  "ainchi": ["n.pos. cu√±ado (de var√≥n)", "familia"],
  "aleshi": ["n.pos. cu√±ado (de mujer)", "familia"],
  "al√ºinyuu": ["n.pos. cu√±ada (de var√≥n)", "familia"],
  "e'er√º": ["n.pos. cu√±ada (de mujer)", "familia"],
  "ashimia": ["n.pos. 1. suegro (de var√≥n). 2. yerno (de var√≥n)", "familia"],
  "emeshi": ["n.pos. suegra (de var√≥n)", "familia"],
  "a'√ºi": ["n.pos. 1. suegro (de mujer). 2. nuera (de var√≥n)", "familia"],
  "a'√ºl√º": ["n.pos. 1. suegra (de mujer). 2. nuera (de mujer)", "familia"],
  "achon'ir√º": ["n.pos. sobrino/a (materno de hembra)", "familia"],
  "asiip√º": ["n.pos. sobrino/a (materno de var√≥n). pl. asiip√ºnuu", "familia"],
  "am√ºraaj√ºin": ["n.pos. novio/via", "familia"],
  "a'wayuuse": ["n.pos. esposo/a. V. wayuu", "familia"],
  "eechin": ["n.pos. marido, esposo", "familia"],
  "eer√ºin": ["n.pos. esposa", "familia"],
  "achonyaashi": ["n.pos. hijastro/tra; hijo/a adoptivo/a", "familia"],
  "ashiyaashi": ["n.pos. padrastro", "familia"],
  "eiyaas√º": ["n.pos. madrastra", "familia"],
  "amaajachi": ["n.pos. compa√±ero/ra. pl. amaajana", "familia"],
  "awala'ata": ["n.pos. compa√±ero/ra; pareja", "familia"],
  "ap√ºshi": ["n.pos. 1. familia, pariente. 2. compa√±ero. 3. parte", "familia"],
  "at√ºnajut√º": ["n.pos. amigo/a", "familia"],
  "a'√ºn√º√º": ["n.pos. enemigo/a", "familia"],
  "achepchia": ["n.pos. 1. sirviente/ta. 2. esclavo/va", "familia"],
  "ka'i": ["n. d√≠a, sol. V. akalia", "naturaleza"],
  "kashi": ["n. luna", "naturaleza"],
  "lap√º": ["n.pos. sue√±o", "naturaleza"],
  "ai (noche)": ["n. noche (ai¬≤)", "naturaleza"],
  "juya": ["n. lluvia, a√±o", "naturaleza"],
  "iiwa": ["n. primavera (tiempo de lluvias menores), Pl√©yades (constelaci√≥n)", "naturaleza"],
  "isashii": ["n. tierra virgen, desierto", "naturaleza"],
  "jasai": ["n. arena", "naturaleza"],
  "ipa": ["n. piedra. pos. eipain", "naturaleza"],
  "j√º'√ºi": ["n. agua (del r√≠o, pozo)", "naturaleza"],
  "siki": ["n. fuego. V. asema", "naturaleza"],
  "asema": ["n.pos. 1. le√±a. 2. fuego. V. siki", "naturaleza"],
  "alama": ["n. pasto. pos. a'alamase, a'alamain", "naturaleza"],
  "aippia": ["n. √°rbol trupillo, cuj√≠ (√°rbol t√≠pico guajiro). pos. a'aippiase", "naturaleza"],
  "irama": ["n. venado", "naturaleza"],
  "ayaa": ["n.pos. rel√°mpago", "naturaleza"],
  "at√ºr√ºla": ["n.pos. trueno, paso estruendoso de animales", "naturaleza"],
  "awa√ºya": ["n.pos. semillas (para la siembra). abs. wa√ºyee", "naturaleza"],
  "a'ttia": ["n.pos. cosecha, cultivo. abs. a'ttiee", "naturaleza"],
  "apain": ["n. huerta. pos. a'apainse. V. y√º√ºja", "naturaleza"],
  "anooi": ["n. terreno despejado. pos. a'anooise", "naturaleza"],
  "irolu": ["adj. verde (no seco)", "naturaleza"],
  "ch√ºn√º'√º": ["n. colibr√≠", "naturaleza"],
  "iisho": ["n. ave cardenal coriano", "naturaleza"],
  "eper√º'√ºi": ["n. sapo", "naturaleza"],
  "iwana": ["n. iguana", "naturaleza"],
  "ichii": ["n. 1. sal. 2. √°rbol dividive (planta t√≠pica guajira). pos. e'ichiise", "naturaleza"],
  "jam√ºche'e": ["n. tuna (fruta de cactus)", "naturaleza"],
  "ai (yuca)": ["n. yuca. pos. a'aise (ai¬≥)", "naturaleza"],
  "ama": ["n. caballo. pos. a'amain", "animales"],
  "p√ºliiki": ["n. burro/burra (seg√∫n contexto)", "animales"],
  "anneer√º": ["n. oveja. pos. a'anneetse", "animales"],
  "kaa'ula": ["n. chivo/a. pos. takaa'ulain (mi chivo)", "animales"],
  "paa'a": ["n. vaca. V. asachiral√º", "animales"],
  "atpanaa": ["n. conejo/a. pos. a'atpanaase", "animales"],
  "er√º": ["n. perro/perra. V. m√ºr√ºl√º", "animales"],
  "ja'yumuler√º": ["n. mosca", "animales"],
  "miichi": ["n. casa. V. epia", "casa"],
  "epia": ["n.pos. 1. casa. 2. nido. V. miichi", "casa"],
  "piichipala": ["n. casa, hogar wayuu", "casa"],
  "aajuna": ["n.pos. cubierta, techo. V. aa'u", "casa"],
  "asep√º": ["n.pos. pared", "casa"],
  "ekiipala": ["n.pos. 1. almohada. 2. viga maestra, cumbrera", "casa"],
  "jama'a": ["n. hamaca. pos. -in", "casa"],
  "am√ºchi": ["n. m√∫cura (vasija de barro cocido para agua). pos. am√ºche", "casa"],
  "iita": ["n. recipiente para comida o bebida. pos. -in. V. aliita", "casa"],
  "aliita": ["n. totuma (especie de calabaza). V. iita", "casa"],
  "aanala": ["n.pos. cobija", "casa"],
  "ejer√º": ["n.pos. cuerda (para colgar la hamaca)", "casa"],
  "an√ºl√º": ["n. telar. pos. a'an√ºl√ºin. V. a'anaa", "casa"],
  "ap√º": ["n.pos. atadura, cabestro, cuerda, sarta (de cuentas)", "casa"],
  "erouse": ["n.pos. tapa, tap√≥n", "casa"],
  "r√ºi": ["n. cuchillo", "casa"],
  "chajaruuta": ["n. machete. pos. achajaruutse", "casa"],
  "isira": ["n. maraca. pos. eisira", "casa"],
  "chocho": ["n. trompo. pos. -in", "casa"],
  "chirinchi": ["n. aguardiente", "casa"],
  "jaar√º": ["n. pocillo, jarra, jarro. pos. -in", "casa"],
  "ek√º√ºl√º": ["n. comida, alimento. pos. ek√ºin", "comida"],
  "asalaa": ["n. carne (alimento principal)", "comida"],
  "emia": ["n.pos. comida para el viaje", "comida"],
  "epi": ["n.pos. medicina, remedio, veneno (para exterminar algo)", "salud"],
  "jam√º": ["n. hambre, escasez de alimento", "salud"],
  "ayuulii": ["v.e. estar enfermo/ma ‚Äî n. enfermedad. V. mayeinwaa", "salud"],
  "aapuwaa": ["v.e. estar enfermo/ma ‚Äî v.i. enfermarse", "salud"],
  "ashataa": ["v.i. 1. sanar (una herida). 2. v.t. copiar, imitar", "salud"],
  "eiyajaa": ["v.t. 1. curar. 2. hechizar", "salud"],
  "antaa": ["v.i. venir, llegar", "verbo"],
  "o'unaa": ["v.i. ir", "verbo"],
  "ajuittaa": ["v.i. salir. V. ojuittaa", "verbo"],
  "ekerolaa": ["v.i. entrar", "verbo"],
  "al√º'√ºjaa": ["v.t. llevar, cargar, traer", "verbo"],
  "antiraa": ["v.t. traer", "verbo"],
  "ale'ejaa": ["v.i. volver, regresar", "verbo"],
  "eitawaa": ["v.i. volver, regresar", "verbo"],
  "awataa": ["v.i. 1. volar, despegar. 2. saltar, brincar ‚Äî v.t. saltar", "verbo"],
  "awatawaa": ["v.i. 1. correr. 2. soplar (el viento). 3. volar (por el viento)", "verbo"],
  "aliikajawaa": ["v.i. subir, subirse", "verbo"],
  "ashakataa": ["v.i. bajar, descender", "verbo"],
  "ar√ºtkawaa": ["v.i. acercarse a. V. al√º'√ºlaa", "verbo"],
  "apantajawaa": ["v.i. irse corriendo", "verbo"],
  "apasiajawaa": ["v.i. hacer una visita, pasear", "verbo"],
  "ashuunajaa": ["v.i. nadar", "verbo"],
  "ajalawaa": ["v.i. 1. sentarse. 2. posesionarse. V. aikkalawaa", "verbo"],
  "aikkalawaa": ["v.i. 1. sentarse. 2. posesionarse", "verbo"],
  "eisalawaa": ["v.i. acostarse", "verbo"],
  "atamawaa": ["v.i. 1. levantarse. 2. incorporarse", "verbo"],
  "asha'walawaa": ["v.i. 1. ponerse de pie. 2. pararse", "verbo"],
  "a'luwatawaa": ["v.i. huir, escapar", "verbo"],
  "ajaraittaa": ["v.t. 1. halar. 2. arrastrar", "verbo"],
  "aashajawaa": ["v.i. hablar ‚Äî v.t. criticar", "verbo"],
  "ashajaa": ["v.i./v.t. escribir", "verbo"],
  "aashaje'eraa": ["v.t. leer", "verbo"],
  "aapaa": ["v.t. dar / v.t. o√≠r (dos entradas distintas)", "verbo"],
  "aapajaa": ["v.i./v.t. escuchar", "verbo"],
  "an√ºiki": ["n.pos. 1. voz, habla. 2. palabra, mensaje. 3. idioma", "verbo"],
  "ak√ºjaa": ["v.t. 1. contar. 2. confesar", "verbo"],
  "at√ºjaa": ["v.t. saber", "verbo"],
  "e'raajaa": ["v.t. conocer", "verbo"],
  "e'raa": ["v.t. 1. ver. 2. experimentar", "verbo"],
  "eirakawaa": ["v.i. mirar", "verbo"],
  "anajaa": ["v.t. mirar, observar", "verbo"],
  "ekirajaa": ["v.t. ense√±ar", "verbo"],
  "ekirajawaa": ["v.t. estudiar, aprender", "verbo"],
  "achuntaa": ["v.t. pedir", "verbo"],
  "anoujaa": ["v.i./v.t. creer ‚Äî n. fe", "verbo"],
  "asakiraa": ["v.i. preguntar", "verbo"],
  "asakaa": ["v.t. saludar", "verbo"],
  "asouktaa": ["v.i. responder", "verbo"],
  "asantajaa": ["v.t. adivinar (por suposiciones)", "verbo"],
  "ee'irajaa": ["v.i./v.t. cantar", "verbo"],
  "ewiijaa": ["v.i. silbar", "verbo"],
  "analawaa": ["v.t. 1. averiguar qu√© es, examinar. 2. averiguar c√≥mo est√°", "verbo"],
  "aakinjaa": ["v.t. cantar", "verbo"],
  "ekaa": ["v.t. 1. comer. 2. picar", "verbo"],
  "asaa": ["v.t. beber", "verbo"],
  "asawaa": ["v.t. beber (bebida alcoh√≥lica)", "verbo"],
  "a'lakajawaa": ["v.t. cocinar", "verbo"],
  "atunkaa": ["v.i. dormir", "verbo"],
  "a'yatawaa": ["v.i. trabajar ‚Äî n. trabajo", "verbo"],
  "ashaittaa": ["v.i. jugar", "verbo"],
  "emi'ijaa": ["v.i. jugar", "verbo"],
  "ap√ºnajaa": ["v.t. sembrar", "verbo"],
  "atpajaa": ["v.t. recolectar (alimento)", "verbo"],
  "ar√ºleejaa": ["v.t. pastorear", "verbo"],
  "a'yap√ºjaa": ["v.t. coser", "verbo"],
  "atulaa": ["v.t. entretejer, tejer, trenzar", "verbo"],
  "a'anaa": ["v.t. 1. armar. 2. tejer (en un telar). V. an√ºl√º", "verbo"],
  "e'inaa": ["v.t. tejer con aguja. V. a'anaa", "verbo"],
  "ashijawaa": ["v.t. lavar (ropa)", "verbo"],
  "eisalajaa": ["v.t. cuidar, asear", "verbo"],
  "awareejaa": ["v.t. barrer", "verbo"],
  "akumajaa": ["v.t. 1. hacer, construir. 2. arreglar. 3. componer. 4. crear", "verbo"],
  "aainjaa": ["v.t. 1. hacer. 2. elaborar, fabricar. 3. construir", "verbo"],
  "ajataa": ["v.t. golpear, pegar", "verbo"],
  "a'yaataa": ["v.t. pegar, golpear, azotar", "verbo"],
  "ashe'etaa": ["v.t. golpear, patear", "verbo"],
  "atkawaa": ["v.i. pelear", "verbo"],
  "a'luwajaa": ["v.t. robar", "verbo"],
  "a'ajaa": ["v.t. quemar", "verbo"],
  "asijaa": ["v.t. 1. asar. 2. quemar. 3. marcar", "verbo"],
  "ajutalaa": ["v.t. abrir", "verbo"],
  "as√ºr√ºlaa": ["v.t. 1. cerrar. 2. encerrar", "verbo"],
  "aj√ºtaa": ["v.t. enviar, mandar", "verbo"],
  "aluwatawaa": ["v.i. gobernar, mandar ‚Äî v.t. enviar, mandar", "verbo"],
  "aakataa": ["v.t. quitar", "verbo"],
  "as√ºtaa": ["v.t. quitar", "verbo"],
  "akanajaa": ["v.t. 1. ganar. 2. vencer", "verbo"],
  "apalaalajaa": ["v.i. ir de compras", "verbo"],
  "awalaajaa": ["v.t. pagar", "verbo"],
  "as√ºlajaa": ["v.t. regalar", "verbo"],
  "ajuyaajaa": ["v.t. 1. pedir prestado. 2. deber", "verbo"],
  "akaaliijaa": ["v.t. ayudar", "verbo"],
  "am√ºliajaa": ["v.t. 1. compadecerse de, tener compasi√≥n. 2. consolar. 3. ayudar", "verbo"],
  "aa'inmajaa": ["v.t. cuidar", "verbo"],
  "anaajawaa": ["v.t. guardar", "verbo"],
  "a'atapajaa": ["v.t. esperar", "verbo"],
  "aneekaa": ["v.t. escoger, elegir", "verbo"],
  "akatalaa": ["v.t. separar, apartar", "verbo"],
  "apalirajaa": ["v.t. mezclar", "verbo"],
  "akotchajaa": ["v.t. recoger, reunir", "verbo"],
  "akotchajawaa": ["v.i. reunirse, juntarse", "verbo"],
  "apanapajaa": ["v.t. encontrarse con una persona en el camino", "verbo"],
  "antaa anain": ["v.t. encontrar", "verbo"],
  "aja'itaa": ["v.t. 1. recoger agua. 2. sacar (un l√≠quido)", "verbo"],
  "achecheraa": ["v.t. 1. apretar. 2. tensar", "verbo"],
  "ata'√ºlaa": ["v.t. coger, agarrar", "verbo"],
  "ajurulajaa": ["v.t. revolver", "verbo"],
  "ay√º√ºjawaa": ["v.t. moler", "verbo"],
  "ak√ºn√ºlaa": ["v.t. masticar", "verbo"],
  "achu'laa": ["v.t. 1. besar. 2. chupar. V. atujawaa", "verbo"],
  "ejetaa": ["v.t. escupir", "verbo"],
  "ashiitaa": ["v.i. orinar", "verbo"],
  "e'iitaa": ["v.i. defecar", "verbo"],
  "a√ºjaa": ["v.t. cortar (el pelo), afeitar, trasquilar", "verbo"],
  "ashottaa": ["v.t. cortar (con hacha, machete)", "verbo"],
  "asalajaa": ["v.t. afilar", "verbo"],
  "achitaa": ["v.t. 1. martillar. 2. clavar", "verbo"],
  "alataa": ["v.i. pasar, suceder", "verbo"],
  "al√ºjaa": ["v.t. rastrear", "verbo"],
  "ajayajaa": ["v.i./v.t. espiar ‚Äî v.t. acechar", "verbo"],
  "alawaa": ["n. mentira. V. a'alain", "verbo"],
  "asanalaa aa'in": ["v.i. respirar, suspirar", "verbo"],
  "ashoujaa": ["v.i. estornudar", "verbo"],
  "aawalaa": ["v.t. 1. aflojar. 2. soltar", "verbo"],
  "asiwataa": ["v.t. desatar", "verbo"],
  "ashapajawaa": ["v.i. darse prisa, tener prisa", "verbo"],
  "eemerawaa": ["v.i. descansar ‚Äî n. descanso", "verbo"],
  "alapajaa": ["v.i. lamentar la muerte de uno, asistir a un velorio", "verbo"],
  "a'yalajiraa": ["v.t. 1. tocar (m√∫sica o instrumento). 2. tener velorio", "verbo"],
  "a'yalajaa": ["v.i. llorar", "verbo"],
  "asirajaa": ["v.i. re√≠rse", "verbo"],
  "ainkuwaa aa'in": ["v.i. 1. asustarse. 2. sorprenderse", "verbo"],
  "akulajawaa aa'in": ["v.e. 1. sentir pereza. 2. estar aburrido/da", "verbo"],
  "achekaa": ["v.t. querer", "verbo"],
  "ainkaa": ["v.t. poder, lograr", "verbo"],
  "aiwaa": ["v.i. doler", "verbo"],
  "a'lap√ºjaa": ["v.t. so√±ar con", "verbo"],
  "a'√ºr√ºlawaa": ["v.t. odiar", "verbo"],
  "aleewaa": ["v.e. tener amistad", "verbo"],
  "a'waajaa": ["v.t. alabar", "verbo"],
  "achumajaa": ["v.e. estar celoso/sa; estar envidioso/sa", "verbo"],
  "alerajaa": ["v.t. sentir asco por, aborrecer, desde√±ar", "verbo"],
  "aataa eejuu": ["v.t. oler", "verbo"],
  "akurulaa": ["v.i. tener fr√≠o", "verbo"],
  "ja'iwaa": ["v.e. estar caliente", "verbo"],
  "ipooluu": ["v.e. estar encinta, estar embarazada", "verbo"],
  "eperaa": ["v.e. estar borracho/cha ‚Äî v.i. emborracharse", "verbo"],
  "emiraa": ["v.e. estar harto/ta", "verbo"],
  "a√ºr√ºlaa": ["v.e. estar flaco/ca", "verbo"],
  "anal√º√º": ["v.e. estar mejor de salud", "verbo"],
  "ichee": ["v.e. 1. estar tenso/sa. 2. estar apretado/da. 3. estar duro/ra; firme", "verbo"],
  "eewaa": ["v.e. haber, existir", "verbo"],
  "ittaa": ["v.e. estar podrido/da ‚Äî v.i. pudrirse", "verbo"],
  "ishaa": ["v.i. sufrir una quemadura, quemarse", "verbo"],
  "eke'ejaa aa'in": ["v.t. molestar", "verbo"],
  "eme'eraa aa'in": ["v.t. 1. convencer, persuadir. 2. atraer", "verbo"],
  "eiwa'ajaa aa'in": ["v.t. perturbar, alborotar, incitar", "verbo"],
  "aishichijaa": ["v.t. enojar, provocar", "verbo"],
  "aishichijawaa": ["v.i. enojarse", "verbo"],
  "epejawaa": ["v.t. prender, encender ‚Äî v.i./v.t. arrancar (un motor)", "verbo"],
  "emeroloo": ["v.i. hundirse", "verbo"],
  "wanee": ["adj./pron. uno (1)", "n√∫mero"],
  "piama": ["adj./pron. dos (2)", "n√∫mero"],
  "ap√ºn√ºin": ["adj./pron. tres (3)", "n√∫mero"],
  "pienchon": ["adj./pron. cuatro (4)", "n√∫mero"],
  "ja'rai": ["adj./pron. cinco (5)", "n√∫mero"],
  "aippirua": ["adj./pron. seis (6)", "n√∫mero"],
  "akaratshi": ["adj./pron. siete (7)", "n√∫mero"],
  "shikiirua": ["adj./pron. ocho (8)", "n√∫mero"],
  "p√ºtchirua": ["adj./pron. nueve (9)", "n√∫mero"],
  "pa'ar√º": ["adj./pron. diez (10)", "n√∫mero"],
  "piama pa'ar√º": ["veinte (20)", "n√∫mero"],
  "ap√ºn√ºin pa'ar√º": ["treinta (30)", "n√∫mero"],
  "wayuu": ["n. persona de la etnia wayuu; ser humano digno", "cultura"],
  "alijuna": ["n. blanco/a; persona no wayuu; civilizado/a (persona no wayuu)", "cultura"],
  "alijunaiki": ["n. espa√±ol (idioma; literalmente: lengua del alijuna)", "cultura"],
  "wayuunaiki": ["n. lengua/idioma wayuu (literalmente: lengua del wayuu)", "cultura"],
  "p√ºtchi": ["n.pos. 1. palabra. 2. idioma", "cultura"],
  "la√ºlaa": ["n. anciano", "cultura"],
  "la√ºlaayuu": ["n. ancianos (plural de la√ºlaa)", "cultura"],
  "ala√ºlashi": ["n.pos. jefe, comandante; due√±o/√±a. pl. ala√ºlashii. V. la√ºlaa", "cultura"],
  "piache": ["n. m√©dico/a tradicional wayuu, cham√°n", "cultura"],
  "aseyuu": ["n.pos. esp√≠ritu de la piache", "cultura"],
  "akuaippa": ["n.pos. 1. forma, naturaleza. 2. manera. 3. conducta, costumbre. 4. vida", "cultura"],
  "amanee": ["n.pos. bondad, cari√±o", "cultura"],
  "ana": ["n.pos. 1. dise√±o. 2. color (base de los dise√±os wayuu)", "cultura"],
  "ano'u": ["n.pos. dise√±o (en tejidos)", "cultura"],
  "awashir√ºin": ["n.pos. riqueza", "cultura"],
  "alia": ["n.pos. precio, valor", "cultura"],
  "akanain": ["n.pos. sueldo, ganancia", "cultura"],
  "ajuyaala": ["n.pos. deuda", "cultura"],
  "ee'irain": ["n.pos. canci√≥n. V. jayeechi", "cultura"],
  "aamaka": ["n.pos. 1. cementerio. 2. difunto/ta", "cultura"],
  "amuuyuu": ["n. cementerio. pos. a'amuuyuuse", "cultura"],
  "anoula": ["n.pos. fe", "cultura"],
  "achik√º": ["n.pos. relato, noticia ‚Äî posp. acerca de", "cultura"],
  "ayaakua": ["n.pos. 1. imagen, fotograf√≠a. 2. ejemplo", "cultura"],
  "ayaawase": ["n.pos. se√±al, s√≠mbolo", "cultura"],
  "ayolojo": ["n.pos. 1. sombra. 2. apariencia. 3. esp√≠ritu, fantasma", "cultura"],
  "aainjala": ["n.pos. 1. acci√≥n mala, pecado. 2. hecho", "cultura"],
  "am√ºliala": ["n.pos. sufrimiento", "cultura"],
  "ats√ºin": ["n.pos. fuerza, fortaleza", "cultura"],
  "ajutu": ["n.pos. valor (valent√≠a)", "cultura"],
  "ap√ºlain": ["n.pos. poder", "cultura"],
  "akaijaa": ["v.t. 1. fumar. 2. ahumar", "cultura"],
  "aliichajaa": ["v.t. 1. orde√±ar. 2. exprimir", "cultura"],
  "as√ºsiinajaa": ["v.t. acecinar (salar la carne y secarla al aire)", "cultura"],
  "alumajaa": ["v.t. amansar (caballo, mula, burro)", "cultura"],
  "asaajaa": ["v.t. traer, ir a buscar", "cultura"],
  "asukaa": ["v.t. recoger le√±a", "cultura"],
  "aam√ºjaa": ["v.i. ayunar", "cultura"],
  "aipa'a": ["adv. de noche", "tiempo"],
  "aipa'inka": ["adv. anoche", "tiempo"],
  "aliika": ["adv. por la tarde", "tiempo"],
  "aliikainka": ["adv. ayer", "tiempo"],
  "amaiwa": ["adv.rel. en aquel tiempo de", "tiempo"],
  "ama'a": ["n.pos. duraci√≥n", "tiempo"],
  "akalia": ["n.pos. fecha, d√≠a de, tiempo de. V. ka'i", "tiempo"],
  "iip√ºnaa": ["adv. arriba", "espacio"],
  "anooipa'a": ["adv. afuera", "espacio"],
  "cha'aya": ["adv. all√° (lejos)", "espacio"],
  "alu'u": ["posp. dentro de, en", "espacio"],
  "achiirua": ["posp. detr√°s de", "espacio"],
  "ap√ºcho'u": ["posp. detr√°s de (variante)", "espacio"],
  "ap√ºleerua": ["posp. delante de", "espacio"],
  "a'aka": ["posp. 1. entre. 2. en (mezclado), en medio de", "espacio"],
  "a'uto'u": ["posp. al lado de", "espacio"],
  "aink√ºin": ["posp. en, entre", "espacio"],
  "amaa": ["posp. con (acompa√±amiento) ‚Äî conj.rel. y, que, siendo que", "espacio"],
  "am√ºin": ["posp. a, para", "espacio"],
  "ap√ºla": ["posp. para, por ‚Äî conj.rel. para que", "espacio"],
  "anain": ["posp. en, a ‚Äî conj.rel. que, siendo que", "espacio"],
  "ale'eru'u": ["posp. en el vientre de, en el interior de", "espacio"],
  "ama'ana": ["posp. donde, en posesi√≥n de", "espacio"],
  "anainm√ºin": ["posp. a, hacia", "espacio"],
  "anainm√ºinre'eya": ["posp. hasta ‚Äî conj.rel. hasta que", "espacio"],
  "ap√ºlap√ºnaa": ["posp. antes de ‚Äî conj.rel. antes de que", "espacio"],
  "achikijee": ["posp. 1. despu√©s de. 2. m√°s all√° de ‚Äî conj.rel. despu√©s de que", "espacio"],
  "chi": ["adj. este (masc.)", "gram√°tica"],
  "chii": ["pron. √©ste ‚Äî adj. este (posposici√≥n al nombre)", "gram√°tica"],
  "chira": ["adj. ese ‚Äî pron. √©se", "gram√°tica"],
  "chisa": ["adj. aquel ‚Äî pron. aqu√©l", "gram√°tica"],
  "jarai": ["pron. qui√©n, cu√°l ‚Äî adj. cu√°l (masc.)", "gram√°tica"],
  "t√º": ["art./dem. forma femenina del demostrativo / art√≠culo no masculino", "gram√°tica"],
  "ap√ºshua'a": ["adj.rel./pron.rel. todo/da", "gram√°tica"],
  "am√ºiwa'a": ["adj.rel. solo/la; mismo/ma; propio/pia", "gram√°tica"],
  "ataral√ºichi": ["adj. adulto/ta", "gram√°tica"],
  "ja'ap√º": ["adj. mediano/na", "gram√°tica"],
  "ja'itaichi": ["conj. aunque, no importa que", "gram√°tica"],
  "akaisa'a": ["conj. pero, sin embargo", "gram√°tica"],
  "alu'ujasa'a": ["conj. pero", "gram√°tica"],
  "ama'inru'u": ["conj.rel. mientras", "gram√°tica"],
  "wopu": ["n. camino. V. ap√ºna", "lugar"],
  "ap√ºna": ["n.pos. camino, sendero. V. wopu", "lugar"],
  "akua": ["n.pos. 1. viaje. 2. curso. 3. paso, velocidad", "lugar"],
  "anua": ["n. barco. pos. a'anuain", "lugar"],
  "e'ejena": ["n.pos. 1. cabalgadura. 2. veh√≠culo, carro", "lugar"],
  "asapia": ["n.pos. pasaje", "lugar"],
};

const FRASES = [
  { es: "Buenos d√≠as / Hola", way: "Jamaya", cat: "Saludo", nota: "Saludo universal wayuu para cualquier momento del d√≠a" },
  { es: "¬øC√≥mo est√°s?", way: "¬øJam√ºs√º t√º?", cat: "Saludo", nota: "Pregunta de bienestar informal" },
  { es: "Gracias", way: "Anashii", cat: "Cortes√≠a", nota: "Expresi√≥n de gratitud" },
  { es: "S√≠", way: "Aa", cat: "B√°sico", nota: "Afirmaci√≥n" },
  { es: "No", way: "Nno", cat: "B√°sico", nota: "Negaci√≥n" },
  { es: "Por favor", way: "Akotchiiakat", cat: "Cortes√≠a", nota: "Al hacer peticiones" },
  { es: "¬øC√≥mo te llamas?", way: "¬øJam√ºin s√ºn√ºlia pia?", cat: "Presentaci√≥n", nota: "Pregunta por el nombre propio" },
  { es: "Me llamo...", way: "Taya s√ºan√ºlia...", cat: "Presentaci√≥n", nota: "Presentarse con el nombre propio" },
  { es: "Agua", way: "J√º'√ºi", cat: "Necesidades", nota: "Elemento vital en La Guajira des√©rtica" },
  { es: "Tengo hambre", way: "Jam√º taya", cat: "Necesidades", nota: "Expresar hambre (jam√º = hambre/escasez)" },
  { es: "Me duele", way: "Aiwaa t√º", cat: "Salud", nota: "Expresar dolor f√≠sico" },
  { es: "Necesito medicina", way: "Kaj√ºliis√º epi", cat: "Salud", nota: "Epi = medicina/remedio wayuu" },
  { es: "M√©dico tradicional (cham√°n)", way: "Piache", cat: "Salud", nota: "Figura de curaci√≥n espiritual wayuu" },
  { es: "Estoy enfermo/a", way: "Ayuuliwaa taya", cat: "Salud", nota: "Basado en ayuulii: estar enfermo" },
  { es: "Casa / Hogar", way: "Miichi / Piichipala", cat: "Lugar", nota: "Dos formas aceptadas" },
  { es: "Familia / Parientes", way: "Ap√ºshi", cat: "Social", nota: "Concepto central en la organizaci√≥n wayuu" },
  { es: "Uno / Dos / Tres", way: "Wanee / Piama / Ap√ºn√ºin", cat: "N√∫meros", nota: "Primeros tres numerales wayuu" },
  { es: "Cuatro / Cinco", way: "Pienchon / Ja'rai", cat: "N√∫meros", nota: "" },
  { es: "Sol / D√≠a", way: "Ka'i", cat: "Naturaleza", nota: "Ka'i significa a la vez sol y d√≠a" },
  { es: "Luna", way: "Kashi", cat: "Naturaleza", nota: "Elemento central de la cosmovisi√≥n wayuu" },
  { es: "Esposo / Esposa", way: "A'wayuuse", cat: "Familia", nota: "T√©rmino para c√≥nyuge; derivado de wayuu" },
  { es: "Hablar / Conversar", way: "Aashajawaa", cat: "Comunicaci√≥n", nota: "Verbo base de hablar en wayuunaiki" },
  { es: "Escuchar", way: "Aapajaa", cat: "Comunicaci√≥n", nota: "Forma transitiva e intransitiva" },
  { es: "Comer", way: "Ekaa", cat: "Necesidades", nota: "Tambi√©n significa picar (insecto)" },
  { es: "Beber", way: "Asaa", cat: "Necesidades", nota: "Para agua; asawaa para bebidas alcoh√≥licas" },
  { es: "Camino / Sendero", way: "Wopu / Ap√ºna", cat: "Lugar", nota: "Dos formas equivalentes para camino" },
  { es: "Dise√±o wayuu (en tejidos)", way: "Ana / Ano'u", cat: "Cultura", nota: "Base de los dise√±os de la mochila wayuu" },
  { es: "Persona no wayuu", way: "Alijuna", cat: "Cultura", nota: "Literalmente: el civilizado / el blanco" },
  { es: "Idioma wayuu", way: "Wayuunaiki", cat: "Cultura", nota: "Lengua arawak de m√°s de 300.000 hablantes" },
  { es: "Idioma espa√±ol", way: "Alijunaiki", cat: "Cultura", nota: "Literalmente: lengua del alijuna" },
  { es: "Trabajar", way: "A'yatawaa", cat: "Actividad", nota: "Verbo reflexivo intransitivo" },
  { es: "Sembrar", way: "Ap√ºnajaa", cat: "Actividad", nota: "Actividad agr√≠cola importante" },
  { es: "Pastorear animales", way: "Ar√ºleejaa", cat: "Actividad", nota: "Econom√≠a pastoril wayuu" },
  { es: "Tejer (en telar)", way: "A'anaa", cat: "Actividad", nota: "Base del tejido de mochilas wayuu" },
  { es: "Coser con aguja", way: "E'inaa", cat: "Actividad", nota: "T√©cnica alternativa de tejido" },
  { es: "Cantar", way: "Ee'irajaa / Aakinjaa", cat: "Cultura", nota: "Las canciones wayuu son 'ee'irain'" },
  { es: "Canci√≥n wayuu", way: "Ee'irain", cat: "Cultura", nota: "G√©nero musical tradicional wayuu" },
];

const CATS = ["Todos","Saludo","Cortes√≠a","B√°sico","Presentaci√≥n","Salud","Necesidades","Familia","Lugar","N√∫meros","Naturaleza","Cultura","Actividad","Comunicaci√≥n","Social"];

const C = {
  terra:"#C4623A",terraDk:"#9E4A27",clay:"#E8956D",
  sand:"#F5E6C8",desert:"#EDD9A3",sky:"#3A7CA5",
  ocean:"#1B4F72",dark:"#2C1810",muted:"#8B6B55",
  gold:"#D4AF37",cream:"#FDF6E3",green:"#4A7C59",
};

// ‚îÄ‚îÄ State ‚îÄ‚îÄ
let dir = "es-way";
let inputVal = "";
let resultData = null;
let loading = false;
let listening = false;
let tab = "translate";
let history = [];
let catF = "Todos";
let recRef = null;
let apiKey = localStorage.getItem("wayuu_apikey") || "";

// ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ
const totalEntradas = Object.keys(DB).length;

function makeBadge(label, color) {
  return `<span class="badge" style="background:${color}20;border-color:${color}40;color:${color}">${label}</span>`;
}

function buscarLocal(query, direction) {
  const q = query.toLowerCase().trim();
  if (!q) return null;
  if (direction === "way-es") {
    for (const [key, val] of Object.entries(DB)) {
      const k = key.toLowerCase();
      if (k === q || k.startsWith(q) || q.startsWith(k.split("(")[0].trim())) {
        return { result: val[0], source: "diccionario", entry: key, cat: val[1] };
      }
    }
    for (const [key, val] of Object.entries(DB)) {
      if (key.toLowerCase().includes(q) || q.includes(key.toLowerCase().split(" ")[0])) {
        return { result: val[0], source: "diccionario", entry: key, cat: val[1] };
      }
    }
    for (const f of FRASES) {
      if (f.way.toLowerCase().includes(q)) {
        return { result: f.es, source: "frase", entry: f.way, cat: f.cat, nota: f.nota };
      }
    }
  } else {
    for (const f of FRASES) {
      if (f.es.toLowerCase().includes(q) || q.includes(f.es.toLowerCase())) {
        return { result: f.way, source: "frase", entry: f.es, cat: f.cat, nota: f.nota };
      }
    }
    for (const [key, val] of Object.entries(DB)) {
      const meaning = val[0].toLowerCase();
      const words = q.split(/\s+/);
      if (meaning.includes(q) || words.some(w => w.length > 3 && meaning.includes(w))) {
        return { result: key.split("(")[0].trim(), source: "diccionario", entry: key, cat: val[1], meaning: val[0] };
      }
    }
  }
  return null;
}

async function traducirIA(text, direction) {
  const isEsWay = direction === "es-way";
  const system = `Eres el ling√ºista m√°s experto del mundo en wayuunaiki (guajiro), lengua arawak de la etnia wayuu de la Pen√≠nsula de La Guajira, Colombia y Venezuela.\n\nTu conocimiento se basa EXCLUSIVAMENTE en estas fuentes primarias verificadas:\n1. "Diccionario B√°sico Ilustrado Wayuunaiki-Espa√±ol" ‚Äî David M. Captain y Linda B. Captain, SIL, 2005\n2. "Diccionario sistem√°tico de la lengua guajira" ‚Äî Miguel √Ångel Jusay√∫ y Jes√∫s Olza Zubiri, 1988\n3. "Gram√°tica de la lengua guajira" ‚Äî Jes√∫s Olza Zubiri y Miguel √Ångel Jusay√∫, 1986\n4. "Gram√°tica Pedag√≥gica de Guajiro" ‚Äî Karis B. Mansen y Richard A. Mansen, 1984\n\nORTOGRAF√çA OFICIAL (Colombia/Venezuela): alfabeto de 20 letras: a, ch, e, i, j, k, ', l, m, n, o, p, r, s, sh, t, u, √º, w, y\n- Vocales dobles (aa, ee) = m√°s largas\n- ' = cierre glotal (pausa corta entre vocales)\n- √º = 'u' sin redondear labios\n- sh = como ingl√©s 'sh'\n- Infinitivos verbales terminan en -aa\n- Sufijos determinativos: -kai (masc.), -kat (no masc.), -irua (plural)\n- Prefijos personales: ta- (yo), p√º- (t√∫), n√º- (√©l), s√º- (ella), wa- (nos), j√º- (uds), na- (ellos)\n\nREGLAS AL TRADUCIR:\n- Si sabes la traducci√≥n con certeza: da SOLO la traducci√≥n limpia\n- Si es aproximada: a√±ade "(aprox.)" al final\n- Si es una frase compleja, da la estructura palabra por palabra entre corchetes\n- Nunca inventes palabras; si no sabes, di "No documentado ‚Äî [explicaci√≥n en espa√±ol de la ra√≠z m√°s cercana]"\n- NO incluyas explicaciones largas a menos que sean gramaticalmente necesarias\n\n${isEsWay ? "Traduce al wayuunaiki:" : "Traduce al espa√±ol:"}`;
  const res = await fetch("https://api.anthropic.com/v1/messages", {
    method: "POST",
    headers: { "Content-Type": "application/json", "x-api-key": apiKey, "anthropic-version": "2023-06-01", "anthropic-dangerous-direct-browser-access": "true" },
    body: JSON.stringify({
      model: "claude-sonnet-4-20250514",
      max_tokens: 1000,
      system,
      messages: [{ role: "user", content: `"${text}"` }],
    }),
  });
  const d = await res.json();
  return d.content?.[0]?.text?.trim() || "Error de traducci√≥n";
}

// ‚îÄ‚îÄ Speak ‚îÄ‚îÄ
function speakText(text) {
  if (!text) return;
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text.replace(/\(.*?\)/g, ""));
  u.lang = "es-CO"; u.rate = 0.8;
  speechSynthesis.speak(u);
}

// ‚îÄ‚îÄ Render ‚îÄ‚îÄ
function updateDirectionUI() {
  const isEsWay = dir === "es-way";
  document.getElementById("dir-from").innerHTML = isEsWay
    ? `<span style="color:#E8956D">üá®üá¥ Espa√±ol</span>`
    : `<span style="color:#3A7CA5">üåµ Wayuunaiki</span>`;
  document.getElementById("dir-to").innerHTML = isEsWay
    ? `<span style="color:#3A7CA5">üåµ Wayuunaiki</span>`
    : `<span style="color:#E8956D">üá®üá¥ Espa√±ol</span>`;
  document.getElementById("input-label").textContent = isEsWay ? "üá®üá¥ Escribe en espa√±ol" : "üåµ Escribe en wayuunaiki";
  document.getElementById("input-text").placeholder = isEsWay ? "Escribe en espa√±ol o usa el micr√≥fono..." : "Escribe en wayuunaiki...";
  document.getElementById("result-lang-label").textContent = isEsWay ? "üåµ Wayuunaiki" : "üá®üá¥ Espa√±ol";
  document.getElementById("mic-hint").textContent = listening
    ? "üî¥ Escuchando... habla ahora"
    : isEsWay ? "Pulsa el micr√≥fono y habla en espa√±ol" : "Pulsa el micr√≥fono y habla en wayuunaiki";
}

function updateResultUI() {
  const box = document.getElementById("result-box");
  const body = document.getElementById("result-body");
  const srcBadge = document.getElementById("result-source-badge");
  const catBadge = document.getElementById("result-cat-badge");
  const speakBtn = document.getElementById("speak-result-btn");

  if (loading) {
    box.className = "result-box";
    body.innerHTML = `<div class="loading-row">
      <div class="wave">${[0,1,2,3,4].map(i=>`<div class="wave-bar on" style="background:#3A7CA5;animation-delay:${i*.12}s"></div>`).join("")}</div>
      <span class="loading-text">Buscando en diccionario nativo...</span>
    </div>`;
    speakBtn.style.display = "none";
    srcBadge.style.display = "none";
    catBadge.style.display = "none";
    return;
  }
  if (resultData) {
    box.className = "result-box has-result";
    let html = `<p class="result-text">${resultData.result}</p>`;
    if (resultData.nota) html += `<p class="result-nota">üí° ${resultData.nota}</p>`;
    if (resultData.source === "diccionario" && resultData.entry) {
      html += `<p class="result-entry">Entrada: <span style="font-family:monospace;color:#E8956D">${resultData.entry}</span></p>`;
    }
    if (resultData.source === "ia") {
      html += `<p class="result-ia-note">IA especializada (Corpus Jusay√∫ + Captain)</p>`;
    }
    body.innerHTML = html;
    speakBtn.style.display = "flex";
    const srcLabel = resultData.source === "diccionario" ? "üìñ Dict. Nativo" : resultData.source === "frase" ? "üìö Frase Nativa" : "ü§ñ IA Ling√º√≠stica";
    const srcColor = resultData.source === "ia" ? C.sky : C.gold;
    srcBadge.innerHTML = makeBadge(srcLabel, srcColor);
    srcBadge.style.display = "";
    if (resultData.cat) {
      catBadge.innerHTML = makeBadge(resultData.cat, C.green);
      catBadge.style.display = "";
    } else {
      catBadge.style.display = "none";
    }
  } else {
    box.className = "result-box";
    body.innerHTML = `<p class="result-placeholder">La traducci√≥n aparecer√° aqu√≠...</p>`;
    speakBtn.style.display = "none";
    srcBadge.style.display = "none";
    catBadge.style.display = "none";
  }
}

function updateInputUI() {
  const ta = document.getElementById("input-text");
  const clearBtn = document.getElementById("clear-btn");
  const speakBtn = document.getElementById("speak-input-btn");
  const transBtn = document.getElementById("translate-btn");
  clearBtn.style.display = inputVal ? "" : "none";
  speakBtn.disabled = !inputVal;
  transBtn.disabled = !inputVal.trim() || loading;
}

async function traducir(text) {
  if (!text.trim()) return;
  loading = true; resultData = null;
  updateResultUI(); updateInputUI();
  document.getElementById("error-box").style.display = "none";
  try {
    const local = buscarLocal(text, dir);
    if (local) {
      resultData = local;
      history = [{ input: text.trim(), output: local.result, dir, src: local.source, id: Date.now() }, ...history.slice(0, 29)];
    } else {
      if (!apiKey) {
        resultData = { result: "Palabra no encontrada en el diccionario nativo. Configura tu API key de Anthropic (bot√≥n arriba) para usar traducci√≥n con IA.", source: "ia" };
      } else {
        const ia = await traducirIA(text, dir);
        resultData = { result: ia, source: "ia" };
        history = [{ input: text.trim(), output: ia, dir, src: "ia", id: Date.now() }, ...history.slice(0, 29)];
      }
    }
  } catch(e) {
    let msg = "‚ö†Ô∏è Error al conectar con la IA.";
    if (e && e.message && e.message.includes("fetch")) msg = "‚ö†Ô∏è Error de red. Verifica tu conexi√≥n a internet.";
    if (!apiKey) msg = "‚ö†Ô∏è Configura tu API key de Anthropic para usar la traducci√≥n con IA.";
    document.getElementById("error-box").textContent = msg;
    document.getElementById("error-box").style.display = "";
  }
  loading = false;
  updateResultUI(); updateInputUI();
}

// ‚îÄ‚îÄ Tabs ‚îÄ‚îÄ
function switchTab(t) {
  tab = t;
  document.querySelectorAll(".tab-btn").forEach(b => b.classList.toggle("active", b.dataset.tab === t));
  document.querySelectorAll(".tab-content").forEach(c => c.classList.toggle("active", c.id === "tab-" + t));
  if (t === "history") renderHistory();
}

// ‚îÄ‚îÄ Grammar static render ‚îÄ‚îÄ
function renderGrammar() {
  const alpha = [
    ["a","como en espa√±ol"],["ch","como en espa√±ol"],["e","como en espa√±ol"],
    ["i","como en espa√±ol"],["j","como en espa√±ol"],["k","'c' de 'casa'"],
    ["'","cierre glotal (pausa)"],["l","vibrante lateral suave"],["m","como en espa√±ol"],
    ["n","como en espa√±ol"],["o","como en espa√±ol"],["p","como en espa√±ol"],
    ["r","como 'rr' espa√±ola + fricci√≥n"],["s","como en espa√±ol"],["sh","como 'sh' ingl√©s"],
    ["t","como en espa√±ol"],["u","como en espa√±ol"],["√º","'u' sin redondear labios"],
    ["w","como 'hu' en 'huevo'"],["y","como en espa√±ol"],
  ];
  document.getElementById("alpha-grid").innerHTML = alpha.map(([l,s]) =>
    `<div class="alpha-item"><span class="alpha-letter">${l}</span><span class="alpha-desc">${s}</span></div>`
  ).join("");

  const prons = [
    ["taya / ta-","yo / mi-","1¬™ singular"],
    ["pia / p√º-","t√∫ / tu-","2¬™ singular"],
    ["nia / n√º-","√©l / su- (masc.)","3¬™ masc. singular"],
    ["shia / s√º-","ella / su- (no masc.)","3¬™ no masc. singular"],
    ["waya / wa-","nosotros / nuestro-","1¬™ plural"],
    ["jia / j√º-","ustedes / su-","2¬™ plural"],
    ["naya / na-","ellos/as / su-","3¬™ plural"],
  ];
  document.getElementById("pron-list").innerHTML = prons.map(([w,es,gram]) =>
    `<div class="pron-item"><span class="pron-word">${w}</span><span class="pron-es">${es}</span>${makeBadge(gram,C.muted)}</div>`
  ).join("");

  const sufs = [
    ["-kai","masculino singular (el burro: p√ºliikikai)"],
    ["-kat","no masculino singular (la burra: p√ºliikikat)"],
    ["-irua","plural (los/las: p√ºliikiirua)"],
    ["-in / -se / -ya","sufijos de posesi√≥n (mi chivo: takaa'ulain)"],
  ];
  document.getElementById("suf-list").innerHTML = sufs.map(([s,e]) =>
    `<div class="suf-item"><span class="suf-key">${s}</span><span class="suf-desc">${e}</span></div>`
  ).join("");
}

// ‚îÄ‚îÄ Phrases ‚îÄ‚îÄ
function renderPhrases() {
  const activeCats = CATS.filter(c => c === "Todos" || FRASES.some(f => f.cat === c));
  document.getElementById("phrase-cats").innerHTML = activeCats.map(cat =>
    `<button class="cat-btn${catF===cat?" active":""}" data-cat="${cat}">${cat}${cat!=="Todos"?` (${FRASES.filter(f=>f.cat===cat).length})`:""}</button>`
  ).join("");
  document.querySelectorAll(".cat-btn").forEach(b => b.addEventListener("click", () => {
    catF = b.dataset.cat; renderPhrases();
  }));
  const list = catF === "Todos" ? FRASES : FRASES.filter(f => f.cat === catF);
  document.getElementById("phrases-count").textContent = `${FRASES.length} frases nativas verificadas con contexto cultural`;
  document.getElementById("phrase-list").innerHTML = list.map((f,i) =>
    `<div class="phrase-item" data-phrase-idx="${i}" data-cat="${catF}">
      <div class="phrase-row">
        <div><div class="phrase-es">${f.es}</div><div class="phrase-way">${f.way}</div></div>
        ${makeBadge(f.cat, C.gold)}
      </div>
      ${f.nota ? `<div class="phrase-nota">üí° ${f.nota}</div>` : ""}
    </div>`
  ).join("");
  document.querySelectorAll(".phrase-item").forEach(el => {
    el.addEventListener("click", () => {
      const idx = parseInt(el.dataset.phraseIdx);
      const filtered = catF === "Todos" ? FRASES : FRASES.filter(f => f.cat === catF);
      const f = filtered[idx];
      inputVal = f.es;
      resultData = { result: f.way, source: "frase", nota: f.nota, cat: f.cat };
      dir = "es-way";
      document.getElementById("input-text").value = inputVal;
      updateDirectionUI(); updateResultUI(); updateInputUI();
      switchTab("translate");
    });
  });
}

// ‚îÄ‚îÄ History ‚îÄ‚îÄ
function renderHistory() {
  const cont = document.getElementById("history-content");
  if (history.length === 0) {
    cont.innerHTML = `<div class="history-empty"><div class="history-emoji">üïê</div><p style="font-size:14px">Tu historial de traducciones aparecer√° aqu√≠.</p></div>`;
    return;
  }
  cont.innerHTML = `<div class="history-header">
    <span class="history-count">${history.length} traducci√≥n(es)</span>
    <button class="history-clear" id="history-clear-btn">Limpiar</button>
  </div>
  <div class="history-list">${history.map((h,i) =>
    `<div class="history-item" data-hist="${i}">
      <div class="history-item-header">
        <span class="history-dir">${h.dir==="es-way"?"üá®üá¥ ‚Üí üåµ":"üåµ ‚Üí üá®üá¥"}</span>
        ${makeBadge(h.src==="diccionario"?"üìñ Nativo":h.src==="frase"?"üìö Frase":"ü§ñ IA", h.src==="ia"?C.sky:C.gold)}
      </div>
      <div class="history-input">${h.input}</div>
      <div class="history-output">${h.output}</div>
    </div>`
  ).join("")}</div>`;
  document.getElementById("history-clear-btn").addEventListener("click", () => {
    history = []; renderHistory();
  });
  document.querySelectorAll(".history-item").forEach(el => {
    el.addEventListener("click", () => {
      const h = history[parseInt(el.dataset.hist)];
      inputVal = h.input;
      resultData = { result: h.output, source: h.src };
      dir = h.dir;
      document.getElementById("input-text").value = inputVal;
      updateDirectionUI(); updateResultUI(); updateInputUI();
      switchTab("translate");
    });
  });
}

// ‚îÄ‚îÄ Dict search ‚îÄ‚îÄ
function setupDict() {
  document.getElementById("dict-count").textContent = `${totalEntradas} entradas del Diccionario SIL Captain (2005) ‚Äî b√∫squeda en wayuunaiki o espa√±ol`;
  const input = document.getElementById("dict-search");
  input.addEventListener("input", () => {
    const q = input.value.toLowerCase().trim();
    const resultsEl = document.getElementById("dict-results");
    if (q.length < 2) { resultsEl.innerHTML = ""; return; }
    const found = Object.entries(DB)
      .filter(([k, v]) => k.toLowerCase().includes(q) || v[0].toLowerCase().includes(q))
      .slice(0, 10)
      .map(([k, v]) => ({ key: k, val: v[0], cat: v[1] }));
    if (found.length === 0) {
      resultsEl.innerHTML = `<p class="dict-not-found">No encontrado en el diccionario local ‚Äî usa el Traductor con IA</p>`;
      return;
    }
    resultsEl.innerHTML = found.map((r, i) =>
      `<div class="dict-item" data-dict-idx="${i}">
        <div class="dict-item-header">
          <span class="dict-item-key">${r.key.split("(")[0].trim()}</span>
          ${makeBadge(r.cat, C.gold)}
        </div>
        <div class="dict-item-val">${r.val}</div>
      </div>`
    ).join("");
    document.querySelectorAll(".dict-item").forEach((el, i) => {
      el.addEventListener("click", () => {
        const r = found[i];
        inputVal = r.key.split("(")[0].trim();
        resultData = { result: r.val, source: "diccionario", entry: r.key, cat: r.cat };
        document.getElementById("input-text").value = inputVal;
        updateDirectionUI(); updateResultUI(); updateInputUI();
        switchTab("translate");
      });
    });
  });
}

// ‚îÄ‚îÄ Init ‚îÄ‚îÄ
function init() {
  // Header badges
  document.getElementById("header-badges").innerHTML = [
    makeBadge(`üìñ ${totalEntradas} entradas nativas`, C.gold),
    makeBadge("SIL Captain 2005", C.sky),
    makeBadge("Jusay√∫ & Olza 1988", C.green),
  ].join("");

  // Tabs bar
  const TABS = [
    { id: "translate", icon: "üî§", label: "Traducir" },
    { id: "dict", icon: "üìñ", label: "Diccionario" },
    { id: "phrases", icon: "üìö", label: "Frases" },
    { id: "grammar", icon: "üî†", label: "Gram√°tica" },
    { id: "history", icon: "üïê", label: "Historial" },
  ];
  document.getElementById("tabs-bar").innerHTML = TABS.map(t =>
    `<button class="tab-btn${t.id==="translate"?" active":""}" data-tab="${t.id}">
      <div>${t.icon}</div><div>${t.label}</div>
    </button>`
  ).join("");
  document.querySelectorAll(".tab-btn").forEach(b => b.addEventListener("click", () => switchTab(b.dataset.tab)));

  // Translate tab
  updateDirectionUI(); updateResultUI(); updateInputUI();

  document.getElementById("swap-btn").addEventListener("click", () => {
    const prevDir = dir;
    dir = dir === "es-way" ? "way-es" : "es-way";
    const prevInput = inputVal;
    inputVal = resultData?.result || "";
    resultData = prevInput ? { result: prevInput, source: "-" } : null;
    document.getElementById("input-text").value = inputVal;
    updateDirectionUI(); updateResultUI(); updateInputUI();
  });

  const inputText = document.getElementById("input-text");
  inputText.addEventListener("input", () => {
    inputVal = inputText.value;
    updateInputUI();
  });
  inputText.addEventListener("keydown", e => {
    if (e.key === "Enter" && !e.shiftKey) { e.preventDefault(); traducir(inputVal); }
  });

  document.getElementById("clear-btn").addEventListener("click", () => {
    inputVal = ""; resultData = null;
    inputText.value = "";
    updateResultUI(); updateInputUI();
  });

  document.getElementById("speak-input-btn").addEventListener("click", () => speakText(inputVal));
  document.getElementById("speak-result-btn").addEventListener("click", () => resultData && speakText(resultData.result));
  document.getElementById("translate-btn").addEventListener("click", () => traducir(inputVal));

  // Mic
  const micBtn = document.getElementById("mic-btn");
  micBtn.addEventListener("click", () => {
    if (listening) {
      recRef && recRef.stop();
      listening = false;
      micBtn.className = "mic-btn idle";
      document.getElementById("mic-hint").textContent = "Pulsa el micr√≥fono y habla en espa√±ol";
      document.getElementById("mic-wave").style.display = "none";
      document.getElementById("mic-icon").innerHTML = `
        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
        <path d="M19 10v2a7 7 0 0 1-14 0v-2" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
        <line x1="12" y1="19" x2="12" y2="23" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
        <line x1="8" y1="23" x2="16" y2="23" stroke="white" stroke-width="1.5" stroke-linecap="round"/>`;
      return;
    }
    if (!("webkitSpeechRecognition" in window || "SpeechRecognition" in window)) {
      document.getElementById("error-box").textContent = "‚ö†Ô∏è Voz disponible solo en Chrome.";
      document.getElementById("error-box").style.display = "";
      return;
    }
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    const r = new SR();
    r.lang = "es-CO"; r.continuous = false; r.interimResults = false;
    r.onstart = () => {
      listening = true;
      micBtn.className = "mic-btn listening";
      document.getElementById("mic-hint").textContent = "üî¥ Escuchando... habla ahora";
      document.getElementById("mic-wave").style.display = "flex";
      document.getElementById("mic-icon").innerHTML = `<rect x="6" y="4" width="4" height="16" rx="2"/>`;
    };
    r.onresult = e => {
      const t = e.results[0][0].transcript;
      inputVal = t; inputText.value = t;
      updateInputUI();
      traducir(t);
    };
    r.onend = () => {
      listening = false;
      micBtn.className = "mic-btn idle";
      document.getElementById("mic-hint").textContent = "Pulsa el micr√≥fono y habla en espa√±ol";
      document.getElementById("mic-wave").style.display = "none";
      document.getElementById("mic-icon").innerHTML = `
        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
        <path d="M19 10v2a7 7 0 0 1-14 0v-2" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
        <line x1="12" y1="19" x2="12" y2="23" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
        <line x1="8" y1="23" x2="16" y2="23" stroke="white" stroke-width="1.5" stroke-linecap="round"/>`;
    };
    r.onerror = () => {
      listening = false;
      micBtn.className = "mic-btn idle";
      document.getElementById("mic-wave").style.display = "none";
      document.getElementById("error-box").textContent = "‚ö†Ô∏è No se pudo capturar la voz.";
      document.getElementById("error-box").style.display = "";
    };
    recRef = r; r.start();
  });

  // API Key bar
  function updateApiKeyBar() {
    const dot = document.getElementById("apikey-dot");
    const text = document.getElementById("apikey-text");
    if (apiKey) {
      dot.className = "apikey-dot";
      text.textContent = "API key configurada ‚Äî IA habilitada";
    } else {
      dot.className = "apikey-dot off";
      text.textContent = "Sin API key ‚Äî solo diccionario nativo disponible";
    }
  }
  updateApiKeyBar();

  document.getElementById("apikey-bar").addEventListener("click", () => {
    document.getElementById("apikey-input").value = apiKey;
    document.getElementById("apikey-modal").style.display = "flex";
  });
  document.getElementById("apikey-cancel").addEventListener("click", () => {
    document.getElementById("apikey-modal").style.display = "none";
  });
  document.getElementById("apikey-ok").addEventListener("click", () => {
    const val = document.getElementById("apikey-input").value.trim();
    apiKey = val;
    if (val) localStorage.setItem("wayuu_apikey", val);
    else localStorage.removeItem("wayuu_apikey");
    document.getElementById("apikey-modal").style.display = "none";
    updateApiKeyBar();
  });
  document.getElementById("apikey-modal").addEventListener("click", (e) => {
    if (e.target === document.getElementById("apikey-modal")) {
      document.getElementById("apikey-modal").style.display = "none";
    }
  });
  document.getElementById("apikey-input").addEventListener("keydown", (e) => {
    if (e.key === "Enter") document.getElementById("apikey-ok").click();
  });

  // Dict
  setupDict();
  // Phrases
  renderPhrases();
  // Grammar
  renderGrammar();
}

document.addEventListener("DOMContentLoaded", init);
</script>
</body>
</html>
